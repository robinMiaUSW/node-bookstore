<div class="card shadow-sm border-0 rounded-lg">
  <div class="position-relative" style="height: 300px;">
    <img src="<%= book.image.imagePath %>" class="card-img-top rounded-top w-100 h-100" alt="<%= book.title %>"
      style="object-fit: contain;">
    <div class="position-absolute top-0 start-0 bg-secondary px-2 py-1 rounded-end">
      <%= book.genre %>
    </div>
  </div>
  <div class="card-body">
    <h5 class="card-title mb-2">
      <a href="/books/<%= book._id %>" class="text-decoration-none text-dark">
        <%= book.title %>
      </a>
    </h5>
    <!-- Review Stars -->
    <div class="mb-3">
      <% const fullStars=Math.floor(book.averageRating); const halfStar=book.averageRating % 1>= 0.5;
        %>
        <!-- Render Full Stars -->
        <% for (let i=0; i < fullStars; i++) { %>
          <i class="bi bi-star-fill text-warning"></i>
          <% } %>
            <!-- Render Half Star -->
            <% if (halfStar) { %>
              <i class="bi bi-star-half text-warning"></i>
              <% } %>
                <!-- Render Empty Stars -->
                <% for (let i=fullStars + (halfStar ? 1 : 0); i < 5; i++) { %>
                  <i class="bi bi-star text-warning"></i>
                  <% } %>
                    <span class="ms-2 text-muted">
                      <%= book.averageRating.toFixed(1) %>/5
                    </span>
    </div>
    <p class="card-text text-muted mb-4" style="height: 60px; overflow: hidden; text-overflow: ellipsis;">
      <%= book.shortDescription.length> 60 ? book.shortDescription.substring(0, 60) + '...' : book.shortDescription %>

    </p>
    <div class="d-flex justify-content-between align-items-center">
      <span class="text-success fw-bold">&pound;<%= book.price %></span>
      <a href="/cart/add/<%= book._id %>" class="btn btn-primary btn-sm">Add To Cart</a>
    </div>
  </div>
</div>